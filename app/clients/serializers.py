# Generated by Django 3.0.3 on 2020-02-19 21:58

from rest_framework import serializers

from clients.models import (ActionItem, Advisor, Children, Client, Debt,
                            Expense, Goal, Partner, Plan)
from django.contrib.auth.models import User
from rest_framework import serializers


class AdvisorSerializer(serializers.ModelSerializer):
    class Meta:
        model = Advisor
        fields = '__all__'


class ClientSerializer(serializers.ModelSerializer):
    class Meta:
        model = Client
        fields = '__all__'


class ExpenseSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Expense
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Expense
        exclude = ['client']


class ChildrenSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Children
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Children
        exclude = ['client']


class PartnerSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Partner
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Partner
        exclude = ['client']


class GoalSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Goal
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Goal
        exclude = ['client']


class PlanSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Plan
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Plan
        exclude = ['client']


class DebtSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = Debt
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = Debt
        exclude = ['client']


class ActionItemSerializer(serializers.ModelSerializer):
    class CreateSerializer(serializers.ModelSerializer):
        class Meta:
            model = ActionItem
            fields = '__all__'
            extra_kwargs = {
                'client': {'write_only': True}}

    class Meta:
        model = ActionItem
        exclude = ['client']


class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = ['url', 'first_name', 'last_name', 'username', 'email',
                  'password']
        extra_kwargs = {
            'password': {'write_only': True},
            'first_name': {'required': True},
            'last_name': {'required': True}
        }

    def create(self, validated_data):
        instance = super(UserSerializer, self).create(validated_data)
        instance.set_password(validated_data['password'])
        instance.save()
        return instance

    def update(self, instance, validated_data):
        instance.set_password(validated_data['password'])
        instance.save()
        return instance
